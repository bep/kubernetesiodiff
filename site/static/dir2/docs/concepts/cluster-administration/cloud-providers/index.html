<html>
  <body>
    <h1>
      Cloud Providers
    </h1>
    <p>
      <a href="https://github.com/kubernetes/website/edit/master/content/en/docs/concepts/cluster-administration/cloud-providers.md" id="editPageButton" target="_blank">
        Edit This Page
      </a>
    </p>
    <h1>
      Cloud Providers
    </h1>
    <p>
      This page explains how to manage Kubernetes running on a specific
      cloud provider.
    </p>
    <ul id="markdown-toc">
      <li>
        <a href="#aws">
          AWS
        </a>
      </li>
      <li>
        <a href="#azure">
          Azure
        </a>
      </li>
      <li>
        <a href="#cloudstack">
          CloudStack
        </a>
      </li>
      <li>
        <a href="#gce">
          GCE
        </a>
      </li>
      <li>
        <a href="#openstack">
          OpenStack
        </a>
      </li>
      <li>
        <a href="#ovirt">
          OVirt
        </a>
      </li>
      <li>
        <a href="#photon">
          Photon
        </a>
      </li>
      <li>
        <a href="#vsphere">
          vSphere
        </a>
      </li>
      <li>
        <a href="#ibm-cloud-kubernetes-service">
          IBM Cloud Kubernetes Service
        </a>
      </li>
      <li>
        <a href="#baidu-cloud-container-engine">
          Baidu Cloud Container Engine
        </a>
      </li>
      <li>
        <a href="#tencent-kubernetes-engine">
          Tencent Kubernetes Engine
        </a>
      </li>
    </ul>
    <h3 id="kubeadm">
      kubeadm
    </h3>
    <p>
      <a href="/docs/reference/setup-tools/kubeadm/kubeadm/">
        kubeadm
      </a>
      is a popular option for creating kubernetes clusters.
      kubeadm has configuration options to specify configuration information for cloud providers. For example a typical
      in-tree cloud provider can be configured using kubeadm as shown below:
    </p>
    <div class="highlight">
      <pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#a2f;font-weight:bold">apiVersion</span>:<span style="color:#bbb"> </span>kubeadm.k8s.io/v1beta2<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>InitConfiguration<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">nodeRegistration</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#a2f;font-weight:bold">kubeletExtraArgs</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">cloud-provider</span>:<span style="color:#bbb"> </span><span style="color:#b44">&#34;openstack&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">cloud-config</span>:<span style="color:#bbb"> </span><span style="color:#b44">&#34;/etc/kubernetes/cloud.conf&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>---<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">apiVersion</span>:<span style="color:#bbb"> </span>kubeadm.k8s.io/v1beta2<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>ClusterConfiguration<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">kubernetesVersion</span>:<span style="color:#bbb"> </span>v1<span style="color:#666">.13.0</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">apiServer</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#a2f;font-weight:bold">extraArgs</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">cloud-provider</span>:<span style="color:#bbb"> </span><span style="color:#b44">&#34;openstack&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">cloud-config</span>:<span style="color:#bbb"> </span><span style="color:#b44">&#34;/etc/kubernetes/cloud.conf&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#a2f;font-weight:bold">extraVolumes</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#a2f;font-weight:bold">name</span>:<span style="color:#bbb"> </span>cloud<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">hostPath</span>:<span style="color:#bbb"> </span><span style="color:#b44">&#34;/etc/kubernetes/cloud.conf&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">mountPath</span>:<span style="color:#bbb"> </span><span style="color:#b44">&#34;/etc/kubernetes/cloud.conf&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">controllerManager</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#a2f;font-weight:bold">extraArgs</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">cloud-provider</span>:<span style="color:#bbb"> </span><span style="color:#b44">&#34;openstack&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">cloud-config</span>:<span style="color:#bbb"> </span><span style="color:#b44">&#34;/etc/kubernetes/cloud.conf&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#a2f;font-weight:bold">extraVolumes</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#a2f;font-weight:bold">name</span>:<span style="color:#bbb"> </span>cloud<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">hostPath</span>:<span style="color:#bbb"> </span><span style="color:#b44">&#34;/etc/kubernetes/cloud.conf&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">mountPath</span>:<span style="color:#bbb"> </span><span style="color:#b44">&#34;/etc/kubernetes/cloud.conf&#34;</span><span style="color:#bbb">
</span></code></pre>
    </div>
    <p>
      The in-tree cloud providers typically need both
      <code>
        --cloud-provider
      </code>
      and
      <code>
        --cloud-config
      </code>
      specified in the command lines
      for the
      <a href="/docs/admin/kube-apiserver/">
        kube-apiserver
      </a>
      ,
      <a href="/docs/admin/kube-controller-manager/">
        kube-controller-manager
      </a>
      and the
      <a href="/docs/admin/kubelet/">
        kubelet
      </a>
      . The contents of the file specified in
      <code>
        --cloud-config
      </code>
      for each provider is documented below as well.
    </p>
    <p>
      For all external cloud providers, please follow the instructions on the individual repositories,
      which are listed under their headings below, or one may view
      <a href="https://github.com/kubernetes?q=cloud-provider-&amp;type=&amp;language=">
        the list of all repositories
      </a>
    </p>
    <h2 id="aws">
      AWS
    </h2>
    <p>
      This section describes all the possible configurations which can
      be used when running Kubernetes on Amazon Web Services.
    </p>
    <p>
      If you wish to use the external cloud provider, its repository is
      <a href="https://github.com/kubernetes/cloud-provider-aws#readme">
        kubernetes/cloud-provider-aws
      </a>
    </p>
    <h3 id="node-name">
      Node Name
    </h3>
    <p>
      The AWS cloud provider uses the private DNS name of the AWS instance as the name of the Kubernetes Node object.
    </p>
    <h3 id="load-balancers">
      Load Balancers
    </h3>
    <p>
      You can setup
      <a href="/docs/tasks/access-application-cluster/create-external-load-balancer/">
        external load balancers
      </a>
      to use specific features in AWS by configuring the annotations as shown below.
    </p>
    <div class="highlight">
      <pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#a2f;font-weight:bold">apiVersion</span>:<span style="color:#bbb"> </span>v1<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">kind</span>:<span style="color:#bbb"> </span>Service<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">metadata</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#a2f;font-weight:bold">name</span>:<span style="color:#bbb"> </span>example<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#a2f;font-weight:bold">namespace</span>:<span style="color:#bbb"> </span>kube-system<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#a2f;font-weight:bold">labels</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">run</span>:<span style="color:#bbb"> </span>example<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#a2f;font-weight:bold">annotations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">     </span><span style="color:#a2f;font-weight:bold">service.beta.kubernetes.io/aws-load-balancer-ssl-cert</span>:<span style="color:#bbb"> </span>arn:aws:acm:xx-xxxx-x:xxxxxxxxx:xxxxxxx/xxxxx-xxxx-xxxx-xxxx-xxxxxxxxx<span style="color:#bbb"> </span><span style="color:#080;font-style:italic">#replace this value</span><span style="color:#bbb">
</span><span style="color:#bbb">     </span><span style="color:#a2f;font-weight:bold">service.beta.kubernetes.io/aws-load-balancer-backend-protocol</span>:<span style="color:#bbb"> </span>http<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#a2f;font-weight:bold">spec</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#a2f;font-weight:bold">type</span>:<span style="color:#bbb"> </span>LoadBalancer<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#a2f;font-weight:bold">ports</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#a2f;font-weight:bold">port</span>:<span style="color:#bbb"> </span><span style="color:#666">443</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">targetPort</span>:<span style="color:#bbb"> </span><span style="color:#666">5556</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">protocol</span>:<span style="color:#bbb"> </span>TCP<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#a2f;font-weight:bold">selector</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#a2f;font-weight:bold">app</span>:<span style="color:#bbb"> </span>example<span style="color:#bbb">
</span></code></pre>
    </div>
    <p>
      Different settings can be applied to a load balancer service in AWS using
      <em>
        annotations
      </em>
      . The following describes the annotations supported on AWS ELBs:
    </p>
    <ul>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-access-log-emit-interval
        </code>
        : Used to specify access log emit interval.
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-access-log-enabled
        </code>
        : Used on the service to enable or disable access logs.
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-access-log-s3-bucket-name
        </code>
        : Used to specify access log s3 bucket name.
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-access-log-s3-bucket-prefix
        </code>
        : Used to specify access log s3 bucket prefix.
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-additional-resource-tags
        </code>
        : Used on the service to specify a comma-separated list of key-value pairs which will be recorded as additional tags in the ELB. For example:
        <code>
          &quot;Key1=Val1,Key2=Val2,KeyNoVal1=,KeyNoVal2&quot;
        </code>
        .
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-backend-protocol
        </code>
        : Used on the service to specify the protocol spoken by the backend (pod) behind a listener. If
        <code>
          http
        </code>
        (default) or
        <code>
          https
        </code>
        , an HTTPS listener that terminates the connection and parses headers is created. If set to
        <code>
          ssl
        </code>
        or
        <code>
          tcp
        </code>
        , a &ldquo;raw&rdquo; SSL listener is used. If set to
        <code>
          http
        </code>
        and
        <code>
          aws-load-balancer-ssl-cert
        </code>
        is not used then a HTTP listener is used.
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-ssl-cert
        </code>
        : Used on the service to request a secure listener. Value is a valid certificate ARN. For more, see
        <a href="http://docs.aws.amazon.com/ElasticLoadBalancing/latest/DeveloperGuide/elb-listener-config.html">
          ELB Listener Config
        </a>
        CertARN is an IAM or CM certificate ARN, for example
        <code>
          arn:aws:acm:us-east-1:123456789012:certificate/12345678-1234-1234-1234-123456789012
        </code>
        .
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-connection-draining-enabled
        </code>
        : Used on the service to enable or disable connection draining.
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-connection-draining-timeout
        </code>
        : Used on the service to specify a connection draining timeout.
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-connection-idle-timeout
        </code>
        : Used on the service to specify the idle connection timeout.
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled
        </code>
        : Used on the service to enable or disable cross-zone load balancing.
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-security-groups
        </code>
        : Used to specify the security groups to be added to ELB created. This replaces all other security groups previously assigned to the ELB.
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-extra-security-groups
        </code>
        : Used on the service to specify additional security groups to be added to ELB created
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-internal
        </code>
        : Used on the service to indicate that we want an internal ELB.
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-proxy-protocol
        </code>
        : Used on the service to enable the proxy protocol on an ELB. Right now we only accept the value
        <code>
          *
        </code>
        which means enabling the proxy protocol on all ELB backends. In the future we could adjust this to allow setting the proxy protocol only on certain backends.
      </li>
      <li>
        <code>
          service.beta.kubernetes.io/aws-load-balancer-ssl-ports
        </code>
        : Used on the service to specify a comma-separated list of ports that will use SSL/HTTPS listeners. Defaults to
        <code>
          *
        </code>
        (all)
      </li>
    </ul>
    <p>
      The information for the annotations for AWS is taken from the comments on
      <a href="https://github.com/kubernetes/legacy-cloud-providers/blob/master/aws/aws.go">
        aws.go
      </a>
    </p>
    <h2 id="azure">
      Azure
    </h2>
    <p>
      If you wish to use the external cloud provider, its repository is
      <a href="https://github.com/kubernetes/cloud-provider-azure#readme">
        kubernetes/cloud-provider-azure
      </a>
    </p>
    <h3 id="node-name-1">
      Node Name
    </h3>
    <p>
      The Azure cloud provider uses the hostname of the node (as determined by the kubelet or overridden with
      <code>
        --hostname-override
      </code>
      ) as the name of the Kubernetes Node object.
      Note that the Kubernetes Node name must match the Azure VM name.
    </p>
    <h2 id="cloudstack">
      CloudStack
    </h2>
    <p>
      If you wish to use the external cloud provider, its repository is
      <a href="https://github.com/apache/cloudstack-kubernetes-provider">
        apache/cloudstack-kubernetes-provider
      </a>
    </p>
    <h3 id="node-name-2">
      Node Name
    </h3>
    <p>
      The CloudStack cloud provider uses the hostname of the node (as determined by the kubelet or overridden with
      <code>
        --hostname-override
      </code>
      ) as the name of the Kubernetes Node object.
      Note that the Kubernetes Node name must match the CloudStack VM name.
    </p>
    <h2 id="gce">
      GCE
    </h2>
    <p>
      If you wish to use the external cloud provider, its repository is
      <a href="https://github.com/kubernetes/cloud-provider-gcp#readme">
        kubernetes/cloud-provider-gcp
      </a>
    </p>
    <h3 id="node-name-3">
      Node Name
    </h3>
    <p>
      The GCE cloud provider uses the hostname of the node (as determined by the kubelet or overridden with
      <code>
        --hostname-override
      </code>
      ) as the name of the Kubernetes Node object.
      Note that the first segment of the Kubernetes Node name must match the GCE instance name (e.g. a Node named
      <code>
        kubernetes-node-2.c.my-proj.internal
      </code>
      must correspond to an instance named
      <code>
        kubernetes-node-2
      </code>
      ).
    </p>
    <h2 id="openstack">
      OpenStack
    </h2>
    <p>
      This section describes all the possible configurations which can
      be used when using OpenStack with Kubernetes.
    </p>
    <p>
      If you wish to use the external cloud provider, its repository is
      <a href="https://github.com/kubernetes/cloud-provider-openstack#readme">
        kubernetes/cloud-provider-openstack
      </a>
    </p>
    <h3 id="node-name-4">
      Node Name
    </h3>
    <p>
      The OpenStack cloud provider uses the instance name (as determined from OpenStack metadata) as the name of the Kubernetes Node object.
      Note that the instance name must be a valid Kubernetes Node name in order for the kubelet to successfully register its Node object.
    </p>
    <h3 id="services">
      Services
    </h3>
    <p>
      The OpenStack cloud provider
      implementation for Kubernetes supports the use of these OpenStack services from
      the underlying cloud, where available:
    </p>
    <table>
      <thead>
        <tr>
          <th>
            Service
          </th>
          <th>
            API Version(s)
          </th>
          <th>
            Required
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            Block Storage (Cinder)
          </td>
          <td>
            V1†, V2, V3
          </td>
          <td>
            No
          </td>
        </tr>
        <tr>
          <td>
            Compute (Nova)
          </td>
          <td>
            V2
          </td>
          <td>
            No
          </td>
        </tr>
        <tr>
          <td>
            Identity (Keystone)
          </td>
          <td>
            V2‡,  V3
          </td>
          <td>
            Yes
          </td>
        </tr>
        <tr>
          <td>
            Load Balancing (Neutron)
          </td>
          <td>
            V1§, V2
          </td>
          <td>
            No
          </td>
        </tr>
        <tr>
          <td>
            Load Balancing (Octavia)
          </td>
          <td>
            V2
          </td>
          <td>
            No
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      † Block Storage V1 API support is deprecated, Block Storage V3 API support was
      added in Kubernetes 1.9.
    </p>
    <p>
      ‡ Identity V2 API support is deprecated and will be removed from the provider in
      a future release. As of the &ldquo;Queens&rdquo; release, OpenStack will no longer expose the
      Identity V2 API.
    </p>
    <p>
      § Load Balancing V1 API support was removed in Kubernetes 1.9.
    </p>
    <p>
      Service discovery is achieved by listing the service catalog managed by
      OpenStack Identity (Keystone) using the
      <code>
        auth-url
      </code>
      provided in the provider
      configuration. The provider will gracefully degrade in functionality when
      OpenStack services other than Keystone are not available and simply disclaim
      support for impacted features. Certain features are also enabled or disabled
      based on the list of extensions published by Neutron in the underlying cloud.
    </p>
    <h3 id="cloud-conf">
      cloud.conf
    </h3>
    <p>
      Kubernetes knows how to interact with OpenStack via the file cloud.conf. It is
      the file that will provide Kubernetes with credentials and location for the OpenStack auth endpoint.
      You can create a cloud.conf file by specifying the following details in it
    </p>
    <h4 id="typical-configuration">
      Typical configuration
    </h4>
    <p>
      This is an example of a typical configuration that touches the values that most
      often need to be set. It points the provider at the OpenStack cloud&rsquo;s Keystone
      endpoint, provides details for how to authenticate with it, and configures the
      load balancer:
    </p>
    <div class="highlight">
      <pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">[Global]<span style="color:#bbb">
</span><span style="color:#bbb"></span>username=user<span style="color:#bbb">
</span><span style="color:#bbb"></span>password=pass<span style="color:#bbb">
</span><span style="color:#bbb"></span>auth-url=https://&lt;keystone_ip&gt;/identity/v3<span style="color:#bbb">
</span><span style="color:#bbb"></span>tenant-id=c869168a828847f39f7f06edd7305637<span style="color:#bbb">
</span><span style="color:#bbb"></span>domain-id=2a73b8f597c04551a0fdc8e95544be8a<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>[LoadBalancer]<span style="color:#bbb">
</span><span style="color:#bbb"></span>subnet-id=6937f8fa-858d-4bc9-a3a5-18d2c957166a<span style="color:#bbb">
</span></code></pre>
    </div>
    <h5 id="global">
      Global
    </h5>
    <p>
      These configuration options for the OpenStack provider pertain to its global
      configuration and should appear in the
      <code>
        [Global]
      </code>
      section of the
      <code>
        cloud.conf
      </code>
      file:
    </p>
    <ul>
      <li>
        <code>
          auth-url
        </code>
        (Required): The URL of the keystone API used to authenticate. On
        OpenStack control panels, this can be found at Access and Security &gt; API
        Access &gt; Credentials.
      </li>
      <li>
        <code>
          username
        </code>
        (Required): Refers to the username of a valid user set in keystone.
      </li>
      <li>
        <code>
          password
        </code>
        (Required): Refers to the password of a valid user set in keystone.
      </li>
      <li>
        <code>
          tenant-id
        </code>
        (Required): Used to specify the id of the project where you want
        to create your resources.
      </li>
      <li>
        <code>
          tenant-name
        </code>
        (Optional): Used to specify the name of the project where you
        want to create your resources.
      </li>
      <li>
        <code>
          trust-id
        </code>
        (Optional): Used to specify the identifier of the trust to use for
        authorization. A trust represents a user&rsquo;s (the trustor) authorization to
        delegate roles to another user (the trustee), and optionally allow the trustee
        to impersonate the trustor. Available trusts are found under the
        <code>
          /v3/OS-TRUST/trusts
        </code>
        endpoint of the Keystone API.
      </li>
      <li>
        <code>
          domain-id
        </code>
        (Optional): Used to specify the id of the domain your user belongs
        to.
      </li>
      <li>
        <code>
          domain-name
        </code>
        (Optional): Used to specify the name of the domain your user
        belongs to.
      </li>
      <li>
        <code>
          region
        </code>
        (Optional): Used to specify the identifier of the region to use when
        running on a multi-region OpenStack cloud. A region is a general division of
        an OpenStack deployment. Although a region does not have a strict geographical
        connotation, a deployment can use a geographical name for a region identifier
        such as
        <code>
          us-east
        </code>
        . Available regions are found under the
        <code>
          /v3/regions
        </code>
        endpoint of the Keystone API.
      </li>
      <li>
        <code>
          ca-file
        </code>
        (Optional): Used to specify the path to your custom CA file.
      </li>
    </ul>
    <p>
      When using Keystone V3 - which changes tenant to project - the
      <code>
        tenant-id
      </code>
      value
      is automatically mapped to the project construct in the API.
    </p>
    <h5 id="load-balancer">
      Load Balancer
    </h5>
    <p>
      These configuration options for the OpenStack provider pertain to the load
      balancer and should appear in the
      <code>
        [LoadBalancer]
      </code>
      section of the
      <code>
        cloud.conf
      </code>
      file:
    </p>
    <ul>
      <li>
        <code>
          lb-version
        </code>
        (Optional): Used to override automatic version detection. Valid
        values are
        <code>
          v1
        </code>
        or
        <code>
          v2
        </code>
        . Where no value is provided automatic detection will
        select the highest supported version exposed by the underlying OpenStack
        cloud.
      </li>
      <li>
        <code>
          use-octavia
        </code>
        (Optional): Used to determine whether to look for and use an
        Octavia LBaaS V2 service catalog endpoint. Valid values are
        <code>
          true
        </code>
        or
        <code>
          false
        </code>
        .
        Where
        <code>
          true
        </code>
        is specified and an Octaiva LBaaS V2 entry can not be found, the
        provider will fall back and attempt to find a Neutron LBaaS V2 endpoint
        instead. The default value is
        <code>
          false
        </code>
        .
      </li>
      <li>
        <code>
          subnet-id
        </code>
        (Optional): Used to specify the id of the subnet you want to
        create your loadbalancer on. Can be found at Network &gt; Networks. Click on the
        respective network to get its subnets.
      </li>
      <li>
        <code>
          floating-network-id
        </code>
        (Optional): If specified, will create a floating IP for
        the load balancer.
      </li>
      <li>
        <code>
          lb-method
        </code>
        (Optional): Used to specify an algorithm by which load will be
        distributed amongst members of the load balancer pool. The value can be
        <code>
          ROUND_ROBIN
        </code>
        ,
        <code>
          LEAST_CONNECTIONS
        </code>
        , or
        <code>
          SOURCE_IP
        </code>
        . The default behavior if
        none is specified is
        <code>
          ROUND_ROBIN
        </code>
        .
      </li>
      <li>
        <code>
          lb-provider
        </code>
        (Optional): Used to specify the provider of the load balancer.
        If not specified, the default provider service configured in neutron will be
        used.
      </li>
      <li>
        <code>
          create-monitor
        </code>
        (Optional): Indicates whether or not to create a health
        monitor for the Neutron load balancer. Valid values are
        <code>
          true
        </code>
        and
        <code>
          false
        </code>
        .
        The default is
        <code>
          false
        </code>
        . When
        <code>
          true
        </code>
        is specified then
        <code>
          monitor-delay
        </code>
        ,
        <code>
          monitor-timeout
        </code>
        , and
        <code>
          monitor-max-retries
        </code>
        must also be set.
      </li>
      <li>
        <code>
          monitor-delay
        </code>
        (Optional): The time between sending probes to
        members of the load balancer. Ensure that you specify a valid time unit. The valid time units are &ldquo;ns&rdquo;, &ldquo;us&rdquo; (or &ldquo;µs&rdquo;), &ldquo;ms&rdquo;, &ldquo;s&rdquo;, &ldquo;m&rdquo;, &ldquo;h&rdquo;
      </li>
      <li>
        <code>
          monitor-timeout
        </code>
        (Optional): Maximum time for a monitor to wait
        for a ping reply before it times out. The value must be less than the delay
        value. Ensure that you specify a valid time unit. The valid time units are &ldquo;ns&rdquo;, &ldquo;us&rdquo; (or &ldquo;µs&rdquo;), &ldquo;ms&rdquo;, &ldquo;s&rdquo;, &ldquo;m&rdquo;, &ldquo;h&rdquo;
      </li>
      <li>
        <code>
          monitor-max-retries
        </code>
        (Optional): Number of permissible ping failures before
        changing the load balancer member&rsquo;s status to INACTIVE. Must be a number
        between 1 and 10.
      </li>
      <li>
        <code>
          manage-security-groups
        </code>
        (Optional): Determines whether or not the load
        balancer should automatically manage the security group rules. Valid values
        are
        <code>
          true
        </code>
        and
        <code>
          false
        </code>
        . The default is
        <code>
          false
        </code>
        . When
        <code>
          true
        </code>
        is specified
        <code>
          node-security-group
        </code>
        must also be supplied.
      </li>
      <li>
        <code>
          node-security-group
        </code>
        (Optional): ID of the security group to manage.
      </li>
    </ul>
    <h5 id="block-storage">
      Block Storage
    </h5>
    <p>
      These configuration options for the OpenStack provider pertain to block storage
      and should appear in the
      <code>
        [BlockStorage]
      </code>
      section of the
      <code>
        cloud.conf
      </code>
      file:
    </p>
    <ul>
      <li>
        <code>
          bs-version
        </code>
        (Optional): Used to override automatic version detection. Valid
        values are
        <code>
          v1
        </code>
        ,
        <code>
          v2
        </code>
        ,
        <code>
          v3
        </code>
        and
        <code>
          auto
        </code>
        . When
        <code>
          auto
        </code>
        is specified automatic
        detection will select the highest supported version exposed by the underlying
        OpenStack cloud. The default value if none is provided is
        <code>
          auto
        </code>
        .
      </li>
      <li>
        <code>
          trust-device-path
        </code>
        (Optional): In most scenarios the block device names
        provided by Cinder (e.g.
        <code>
          /dev/vda
        </code>
        ) can not be trusted. This boolean toggles
        this behavior. Setting it to
        <code>
          true
        </code>
        results in trusting the block device names
        provided by Cinder. The default value of
        <code>
          false
        </code>
        results in the discovery of
        the device path based on its serial number and
        <code>
          /dev/disk/by-id
        </code>
        mapping and is
        the recommended approach.
      </li>
      <li>
        <code>
          ignore-volume-az
        </code>
        (Optional): Used to influence availability zone use when
        attaching Cinder volumes. When Nova and Cinder have different availability
        zones, this should be set to
        <code>
          true
        </code>
        . This is most commonly the case where
        there are many Nova availability zones but only one Cinder availability zone.
        The default value is
        <code>
          false
        </code>
        to preserve the behavior used in earlier
        releases, but may change in the future.
      </li>
      <li>
        <code>
          node-volume-attach-limit
        </code>
        (Optional): Maximum number of Volumes that can be
        attached to the node, default is 256 for cinder.
      </li>
    </ul>
    <p>
      If deploying Kubernetes versions &lt;= 1.8 on an OpenStack deployment that uses
      paths rather than ports to differentiate between endpoints it may be necessary
      to explicitly set the
      <code>
        bs-version
      </code>
      parameter. A path based endpoint is of the
      form
      <code>
        http://foo.bar/volume
      </code>
      while a port based endpoint is of the form
      <code>
        http://foo.bar:xxx
      </code>
      .
    </p>
    <p>
      In environments that use path based endpoints and Kubernetes is using the older
      auto-detection logic a
      <code>
        BS API version autodetection failed.
      </code>
      error will be
      returned on attempting volume detachment. To workaround this issue it is
      possible to force the use of Cinder API version 2 by adding this to the cloud
      provider configuration:
    </p>
    <div class="highlight">
      <pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">[BlockStorage]<span style="color:#bbb">
</span><span style="color:#bbb"></span>bs-version=v2<span style="color:#bbb">
</span></code></pre>
    </div>
    <h5 id="metadata">
      Metadata
    </h5>
    <p>
      These configuration options for the OpenStack provider pertain to metadata and
      should appear in the
      <code>
        [Metadata]
      </code>
      section of the
      <code>
        cloud.conf
      </code>
      file:
    </p>
    <ul>
      <li>
        <p>
          <code>
            search-order
          </code>
          (Optional): This configuration key influences the way that the
          provider retrieves metadata relating to the instance(s) in which it runs. The
          default value of
          <code>
            configDrive,metadataService
          </code>
          results in the provider
          retrieving metadata relating to the instance from the config drive first if
          available and then the metadata service. Alternative values are:
        </p>
        <ul>
          <li>
            <code>
              configDrive
            </code>
            - Only retrieve instance metadata from the configuration
            drive.
          </li>
          <li>
            <code>
              metadataService
            </code>
            - Only retrieve instance metadata from the metadata
            service.
          </li>
          <li>
            <code>
              metadataService,configDrive
            </code>
            - Retrieve instance metadata from the metadata
            service first if available, then the configuration drive.
          </li>
        </ul>
        <p>
          Influencing this behavior may be desirable as the metadata on the
          configuration drive may grow stale over time, whereas the metadata service
          always provides the most up to date view. Not all OpenStack clouds provide
          both configuration drive and metadata service though and only one or the other
          may be available which is why the default is to check both.
        </p>
      </li>
    </ul>
    <h5 id="route">
      Route
    </h5>
    <p>
      These configuration options for the OpenStack provider pertain to the
      <a href="/docs/concepts/cluster-administration/network-plugins/#kubenet">
        kubenet
      </a>
      Kubernetes network plugin and should appear in the
      <code>
        [Route]
      </code>
      section of the
      <code>
        cloud.conf
      </code>
      file:
    </p>
    <ul>
      <li>
        <code>
          router-id
        </code>
        (Optional): If the underlying cloud&rsquo;s Neutron deployment supports
        the
        <code>
          extraroutes
        </code>
        extension then use
        <code>
          router-id
        </code>
        to specify a router to add
        routes to.  The router chosen must span the private networks containing your
        cluster nodes (typically there is only one node network, and this value should be
        the default router for the node network).  This value is required to use
        <a href="/docs/concepts/cluster-administration/network-plugins/#kubenet">
          kubenet
        </a>
        on OpenStack.
      </li>
    </ul>
    <h2 id="ovirt">
      OVirt
    </h2>
    <h3 id="node-name">
      Node Name
    </h3>
    <p>
      The OVirt cloud provider uses the hostname of the node (as determined by the kubelet or overridden with
      <code>
        --hostname-override
      </code>
      ) as the name of the Kubernetes Node object.
      Note that the Kubernetes Node name must match the VM FQDN (reported by OVirt under
      <code>
        &lt;vm&gt;&lt;guest_info&gt;&lt;fqdn&gt;...&lt;/fqdn&gt;&lt;/guest_info&gt;&lt;/vm&gt;
      </code>
      )
    </p>
    <h2 id="photon">
      Photon
    </h2>
    <h3 id="node-name-1">
      Node Name
    </h3>
    <p>
      The Photon cloud provider uses the hostname of the node (as determined by the kubelet or overridden with
      <code>
        --hostname-override
      </code>
      ) as the name of the Kubernetes Node object.
      Note that the Kubernetes Node name must match the Photon VM name (or if
      <code>
        overrideIP
      </code>
      is set to true in the
      <code>
        --cloud-config
      </code>
      , the Kubernetes Node name must match the Photon VM IP address).
    </p>
    <h2 id="vsphere">
      vSphere
    </h2>
    <div id="vsphere-cloud-provider">
      <ul>
        <li>
          <a href="#vsphere-cloud-provider-0">
            vSphere &gt;= 6.7U3
          </a>
        </li>
        <li>
          <a href="#vsphere-cloud-provider-1">
            vSphere &lt; 6.7U3
          </a>
        </li>
      </ul>
      <div id="vsphere-cloud-provider-0">
        <p>
          For all vSphere deployments on vSphere &gt;= 6.7U3, the
          <a href="https://github.com/kubernetes/cloud-provider-vsphere">
            external vSphere cloud provider
          </a>
          , along with the
          <a href="https://github.com/kubernetes-sigs/vsphere-csi-driver">
            vSphere CSI driver
          </a>
          is recommended. See
          <a href="https://cloud-provider-vsphere.sigs.k8s.io/tutorials/kubernetes-on-vsphere-with-kubeadm.html">
            Deploying a Kubernetes Cluster on vSphere with CSI and CPI
          </a>
          for a quick start guide.
        </p>
      </div>
      <div id="vsphere-cloud-provider-1">
        <p>
          If you are running vSphere &lt; 6.7U3, the in-tree vSphere cloud provider is recommended. See
          <a href="https://cloud-provider-vsphere.sigs.k8s.io/tutorials/k8s-vcp-on-vsphere-with-kubeadm.html">
            Running a Kubernetes Cluster on vSphere with kubeadm
          </a>
          for a quick start guide.
        </p>
      </div>
    </div>
    <script>
      $(function(){$("#vsphere-cloud-provider").tabs();});
    </script>
    <p>
      For in-depth documentation on the vSphere cloud provider, visit the
      <a href="https://cloud-provider-vsphere.sigs.k8s.io">
        vSphere cloud provider docs site
      </a>
      .
    </p>
    <h2 id="ibm-cloud-kubernetes-service">
      IBM Cloud Kubernetes Service
    </h2>
    <h3 id="compute-nodes">
      Compute nodes
    </h3>
    <p>
      By using the IBM Cloud Kubernetes Service provider, you can create clusters with a mixture of virtual and physical (bare metal) nodes in a single zone or across multiple zones in a region. For more information, see
      <a href="https://cloud.ibm.com/docs/containers?topic=containers-plan_clusters#plan_clusters">
        Planning your cluster and worker node setup
      </a>
      .
    </p>
    <p>
      The name of the Kubernetes Node object is the private IP address of the IBM Cloud Kubernetes Service worker node instance.
    </p>
    <h3 id="networking">
      Networking
    </h3>
    <p>
      The IBM Cloud Kubernetes Service provider provides VLANs for quality network performance and network isolation for nodes. You can set up custom firewalls and Calico network policies to add an extra layer of security for your cluster, or connect your cluster to your on-prem data center via VPN. For more information, see
      <a href="https://cloud.ibm.com/docs/containers?topic=containers-cs_network_cluster#cs_network_cluster">
        Planning in-cluster and private networking
      </a>
      .
    </p>
    <p>
      To expose apps to the public or within the cluster, you can leverage NodePort, LoadBalancer, or Ingress services. You can also customize the Ingress application load balancer with annotations. For more information, see
      <a href="https://cloud.ibm.com/docs/containers?topic=containers-cs_network_planning#cs_network_planning">
        Planning to expose your apps with external networking
      </a>
      .
    </p>
    <h3 id="storage">
      Storage
    </h3>
    <p>
      The IBM Cloud Kubernetes Service provider leverages Kubernetes-native persistent volumes to enable users to mount file, block, and cloud object storage to their apps. You can also use database-as-a-service and third-party add-ons for persistent storage of your data. For more information, see
      <a href="https://cloud.ibm.com/docs/containers?topic=containers-storage_planning#storage_planning">
        Planning highly available persistent storage
      </a>
      .
    </p>
    <h2 id="baidu-cloud-container-engine">
      Baidu Cloud Container Engine
    </h2>
    <h3 id="node-name-2">
      Node Name
    </h3>
    <p>
      The Baidu cloud provider uses the private IP address of the node (as determined by the kubelet or overridden with
      <code>
        --hostname-override
      </code>
      ) as the name of the Kubernetes Node object.
      Note that the Kubernetes Node name must match the Baidu VM private IP.
    </p>
    <h2 id="tencent-kubernetes-engine">
      Tencent Kubernetes Engine
    </h2>
    <p>
      If you wish to use the external cloud provider, its repository is
      <a href="https://github.com/TencentCloud/tencentcloud-cloud-controller-manager">
        TencentCloud/tencentcloud-cloud-controller-manager
      </a>
      .
    </p>
    <h3 id="node-name-3">
      Node Name
    </h3>
    <p>
      The Tencent cloud provider uses the hostname of the node (as determined by the kubelet or overridden with
      <code>
        --hostname-override
      </code>
      ) as the name of the Kubernetes Node object.
      Note that the Kubernetes Node name must match the Tencent VM private IP.
    </p>
  </body>
</html>